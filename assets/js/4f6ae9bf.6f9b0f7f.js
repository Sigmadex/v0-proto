"use strict";(self.webpackChunkdocusaur=self.webpackChunkdocusaur||[]).push([[468],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return m}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var d=n.createContext({}),u=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(d.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},s=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,d=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),s=u(a),m=l,k=s["".concat(d,".").concat(m)]||s[m]||c[m]||r;return a?n.createElement(k,i(i({ref:t},p),{},{components:a})):n.createElement(k,i({ref:t},p))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=s;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:l,i[1]=o;for(var u=2;u<r;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}s.displayName="MDXCreateElement"},2329:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return o},contentTitle:function(){return d},metadata:function(){return u},toc:function(){return p},default:function(){return s}});var n=a(7462),l=a(3366),r=(a(7294),a(3905)),i=["components"],o={},d="ToolShedFacet",u={unversionedId:"Api Specification/facets/ToolShedFacet",id:"Api Specification/facets/ToolShedFacet",isDocsHomePage:!1,title:"ToolShedFacet",description:"Functions",source:"@site/docs/Api Specification/facets/ToolShedFacet.md",sourceDirName:"Api Specification/facets",slug:"/Api Specification/facets/ToolShedFacet",permalink:"/v0-proto/docs/Api Specification/facets/ToolShedFacet",editUrl:"https://github.com/Sigmadex/v0-proto/docs/Api Specification/facets/ToolShedFacet.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"TokenFarmFacet",permalink:"/v0-proto/docs/Api Specification/facets/TokenFarmFacet"},next:{title:"ReducedPenaltyFacet",permalink:"/v0-proto/docs/Api Specification/facets/RewardFacets/ReducedPenaltyFacet"}},p=[{value:"Functions",id:"functions",children:[{value:"updatePool",id:"updatepool",children:[{value:"Declaration",id:"declaration",children:[],level:4},{value:"Modifiers:",id:"modifiers",children:[],level:4},{value:"Args:",id:"args",children:[],level:4}],level:3},{value:"updateStakingPool",id:"updatestakingpool",children:[{value:"Declaration",id:"declaration-1",children:[],level:4},{value:"Modifiers:",id:"modifiers-1",children:[],level:4}],level:3},{value:"massUpdatePools",id:"massupdatepools",children:[{value:"Declaration",id:"declaration-2",children:[],level:4},{value:"Modifiers:",id:"modifiers-2",children:[],level:4}],level:3},{value:"getMultiplier",id:"getmultiplier",children:[{value:"Declaration",id:"declaration-3",children:[],level:4},{value:"Modifiers:",id:"modifiers-3",children:[],level:4},{value:"Args:",id:"args-1",children:[],level:4},{value:"Returns:",id:"returns",children:[],level:4}],level:3},{value:"totalAllocPoint",id:"totalallocpoint",children:[{value:"Declaration",id:"declaration-4",children:[],level:4},{value:"Modifiers:",id:"modifiers-4",children:[],level:4},{value:"Returns:",id:"returns-1",children:[],level:4}],level:3},{value:"sdexPerBlock",id:"sdexperblock",children:[{value:"Declaration",id:"declaration-5",children:[],level:4},{value:"Modifiers:",id:"modifiers-5",children:[],level:4},{value:"Returns:",id:"returns-2",children:[],level:4}],level:3},{value:"tokenRewardData",id:"tokenrewarddata",children:[{value:"Declaration",id:"declaration-6",children:[],level:4},{value:"Modifiers:",id:"modifiers-6",children:[],level:4},{value:"Args:",id:"args-2",children:[],level:4},{value:"Returns:",id:"returns-3",children:[],level:4}],level:3},{value:"calcRefund",id:"calcrefund",children:[{value:"Declaration",id:"declaration-7",children:[],level:4},{value:"Modifiers:",id:"modifiers-7",children:[],level:4},{value:"Args:",id:"args-3",children:[],level:4},{value:"Returns:",id:"returns-4",children:[],level:4}],level:3}],level:2}],c={toc:p};function s(e){var t=e.components,a=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"toolshedfacet"},"ToolShedFacet"),(0,r.kt)("h2",{id:"functions"},"Functions"),(0,r.kt)("h3",{id:"updatepool"},"updatePool"),(0,r.kt)("p",null,"the update pool function is called by the system as the first order of business on every deposit and withdraw and does the heavily lifting in terms of minting the SDEX block reward and distributing it out to the various pools."),(0,r.kt)("h4",{id:"declaration"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function updatePool(\n    uint256 pid\n  ) public onlyDiamond\n")),(0,r.kt)("h4",{id:"modifiers"},"Modifiers:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Modifier"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"onlyDiamond")))),(0,r.kt)("h4",{id:"args"},"Args:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Arg"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"pid")),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"the pool id currently being updated")))),(0,r.kt)("h3",{id:"updatestakingpool"},"updateStakingPool"),(0,r.kt)("p",null,"Used during pool addtion, or allocPoint recalibration to manage total Allocation points for all pools"),(0,r.kt)("h4",{id:"declaration-1"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function updateStakingPool(\n  ) public onlyDiamond\n")),(0,r.kt)("h4",{id:"modifiers-1"},"Modifiers:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Modifier"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"onlyDiamond")))),(0,r.kt)("h3",{id:"massupdatepools"},"massUpdatePools"),(0,r.kt)("p",null,"massUpdatePools can be called to update the state of all pools"),(0,r.kt)("h4",{id:"declaration-2"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function massUpdatePools(\n  ) public\n")),(0,r.kt)("h4",{id:"modifiers-2"},"Modifiers:"),(0,r.kt)("p",null,"No modifiers"),(0,r.kt)("h3",{id:"getmultiplier"},"getMultiplier"),(0,r.kt)("p",null,"Normally Sdex is emitted at a constant rate per block, though sometimes a multiplier may be added to multiply this number a certain factor, getMultiplier manages this"),(0,r.kt)("h4",{id:"declaration-3"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function getMultiplier(\n    uint256 from,\n    uint256 to\n  ) public returns (uint256)\n")),(0,r.kt)("h4",{id:"modifiers-3"},"Modifiers:"),(0,r.kt)("p",null,"No modifiers"),(0,r.kt)("h4",{id:"args-1"},"Args:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Arg"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"from")),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"the starting block one wishes to calculate from")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"to")),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"the final block one wishes to calculate from")))),(0,r.kt)("h4",{id:"returns"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"the multipler applied to all cake over this block period")))),(0,r.kt)("h3",{id:"totalallocpoint"},"totalAllocPoint"),(0,r.kt)("p",null,"totalAllocPoint returns the total allocation points over all pools.  This number is divided against to determine which proportion of the block emission goes to each pool"),(0,r.kt)("h4",{id:"declaration-4"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function totalAllocPoint(\n  ) public returns (uint256)\n")),(0,r.kt)("h4",{id:"modifiers-4"},"Modifiers:"),(0,r.kt)("p",null,"No modifiers"),(0,r.kt)("h4",{id:"returns-1"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"total ammount of allocation points across all pools")))),(0,r.kt)("h3",{id:"sdexperblock"},"sdexPerBlock"),(0,r.kt)("p",null,"returns how many SDEX tokens are being emitted per block, remember to pair with the getMultiplier function if the bonus multiplier is not 1"),(0,r.kt)("h4",{id:"declaration-5"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function sdexPerBlock(\n  ) public returns (uint256)\n")),(0,r.kt)("h4",{id:"modifiers-5"},"Modifiers:"),(0,r.kt)("p",null,"No modifiers"),(0,r.kt)("h4",{id:"returns-2"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"uint256")),(0,r.kt)("td",{parentName:"tr",align:null},"amount of SDEX emitted per block")))),(0,r.kt)("h3",{id:"tokenrewarddata"},"tokenRewardData"),(0,r.kt)("p",null,"tokenRewardData returns the inner tally of information that is kept on each token on the platform that concerns the distribution of rewards of each of these tokens from the penalty pool"),(0,r.kt)("h4",{id:"declaration-6"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function tokenRewardData(\n    address token\n  ) public returns (struct TokenRewardData)\n")),(0,r.kt)("h4",{id:"modifiers-6"},"Modifiers:"),(0,r.kt)("p",null,"No modifiers"),(0,r.kt)("h4",{id:"args-2"},"Args:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Arg"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"token")),(0,r.kt)("td",{parentName:"tr",align:null},"address"),(0,r.kt)("td",{parentName:"tr",align:null},"address of token in question")))),(0,r.kt)("h4",{id:"returns-3"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"TokenRewardData")),(0,r.kt)("td",{parentName:"tr",align:null},"see {TokenRewardData} for more info")))),(0,r.kt)("h3",{id:"calcrefund"},"calcRefund"),(0,r.kt)("p",null,"calcRefund returns the refund and penalty of an amount of a token given a timeStart (often the current Time) and the timeEnd (often the end of a stake) to determine how much is penalized and how much is refunded.  Generally if one makes it through 50% of the take, one is refunded 50% of the tokens"),(0,r.kt)("h4",{id:"declaration-7"},"Declaration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"  function calcRefund(\n    uint256 timeStart,\n    uint256 timeEnd,\n    uint256 amount\n  ) public returns (uint256 refund, uint256 penalty)\n")),(0,r.kt)("h4",{id:"modifiers-7"},"Modifiers:"),(0,r.kt)("p",null,"No modifiers"),(0,r.kt)("h4",{id:"args-3"},"Args:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Arg"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"timeStart")),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"the time, in seconds one wishes to calculate")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"timeEnd")),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"the time, in seconds one wishes to end")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},"uint256"),(0,r.kt)("td",{parentName:"tr",align:null},"the amount of a token in question")))),(0,r.kt)("h4",{id:"returns-4"},"Returns:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"refund")),(0,r.kt)("td",{parentName:"tr",align:null},"how much is refunded if withdrawing at start time given endTime and how much is penalized")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"penalty")),(0,r.kt)("td",{parentName:"tr",align:null},"how much one is penalized")))))}s.isMDXComponent=!0}}]);